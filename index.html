<!DOCTYPE html>
<html>
<head>
  <title>Prayer Clock</title>
  <style>
    #clock {
      font-size: 48px;
      font-weight: bold;
      margin-bottom: 20px;
    }

    .prayer-time {
      font-size: 24px;
      margin-bottom: 10px;
    }

    .notification {
      font-size: 18px;
      margin-bottom: 5px;
    }
  </style>
</head>
<body>
  <h1>Reloj de Oración</h1>
  <div id="clock"></div>

  <div id="prayer-times">
    <h2>Tiempos de Oración</h2>
    <div class="prayer-time" id="fajr">Fajr: </div>
    <div class="prayer-time" id="dhuhr">Dhuhr: </div>
    <div class="prayer-time" id="asr">Asr: </div>
    <div class="prayer-time" id="maghrib">Maghrib: </div>
    <div class="prayer-time" id="isha">Isha: </div>
  </div>

  <div id="notifications">
    <h2>Notificaciones</h2>
    <div id="notification-list"></div>
  </div>

  <div id="livestream">
    <h2>Transmisión en vivo desde La Meca</h2>
    <div class="livestream-video">
      <iframe width="560" height="315" src="https://www.youtube.com/embed/hrnT2IFqyro" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
  </div>

  <script>
    var prayerTimes = {
      fajr: { hour: 4, minute: 11 },
      dhuhr: { hour: 11, minute: 52 },
      asr: { hour: 15, minute: 19 },
      maghrib: { hour: 18, minute: 16 },
      isha: { hour: 19, minute: 29 }
    };

    function updateClock() {
      var clockElement = document.getElementById('clock');
      var currentTime = new Date();
      var hours = currentTime.getHours();
      var minutes = currentTime.getMinutes();
      var seconds = currentTime.getSeconds();

      var timeString = formatTime(hours) + ':' + formatTime(minutes) + ':' + formatTime(seconds);
      clockElement.textContent = timeString;
    }

    function formatTime(time) {
      return time < 10 ? '0' + time : time;
    }

    function updatePrayerTimes() {
      var currentPrayer = null;
      var currentTime = new Date();
      var currentHour = currentTime.getHours();
      var currentMinute = currentTime.getMinutes();

      for (var prayer in prayerTimes) {
        var prayerTime = prayerTimes[prayer];
        var prayerElement = document.getElementById(prayer);

        var hour = prayerTime.hour;
        var minute = prayerTime.minute;

        var formattedHour = formatTime(hour);
        var formattedMinute = formatTime(minute);

        prayerElement.textContent = prayerElement.textContent.split(':')[0] + ': ' + formattedHour + ':' + formattedMinute;

        if (currentHour === hour && currentMinute === minute) {
          prayerElement.style.color = 'green';
          currentPrayer = prayerElement.textContent.split(':')[0];
        } else {
          prayerElement.style.color = 'black';
        }
      }

      if (currentPrayer !== null) {
        sendNotification('Es hora de ' + currentPrayer);
      }
    }

    function sendNotification(message) {
      var notificationList = document.getElementById('notification-list');
      var notificationElement = document.createElement('div');
      notificationElement.textContent = message;
      notificationElement.className = 'notification';
      notificationList.appendChild(notificationElement);
    }

    function requestNotificationPermission() {
      if ('Notification' in window) {
        Notification.requestPermission().then(function(permission) {
          if (permission === 'granted') {
            sendNotification('Notificaciones activadas');
          }
        });
      }
    }

    function savePrayerTimes() {
      var fajrTimeInput = document.getElementById('fajr-time');
      var dhuhrTimeInput = document.getElementById('dhuhr-time');
      var asrTimeInput = document.getElementById('asr-time');
      var maghribTimeInput = document.getElementById('maghrib-time');
      var ishaTimeInput = document.getElementById('isha-time');

      var fajrTime = fajrTimeInput.value;
      var dhuhrTime = dhuhrTimeInput.value;
      var asrTime = asrTimeInput.value;
      var maghribTime = maghribTimeInput.value;
      var ishaTime = ishaTimeInput.value;

      var fajrHour = parseInt(fajrTime.split(':')[0]);
      var fajrMinute = parseInt(fajrTime.split(':')[1]);
      var dhuhrHour = parseInt(dhuhrTime.split(':')[0]);
      var dhuhrMinute = parseInt(dhuhrTime.split(':')[1]);
      var asrHour = parseInt(asrTime.split(':')[0]);
      var asrMinute = parseInt(asrTime.split(':')[1]);
      var maghribHour = parseInt(maghribTime.split(':')[0]);
      var maghribMinute = parseInt(maghribTime.split(':')[1]);
      var ishaHour = parseInt(ishaTime.split(':')[0]);
      var ishaMinute = parseInt(ishaTime.split(':')[1]);

      prayerTimes.fajr = { hour: fajrHour, minute: fajrMinute };
      prayerTimes.dhuhr = { hour: dhuhrHour, minute: dhuhrMinute };
      prayerTimes.asr = { hour: asrHour, minute: asrMinute };
      prayerTimes.maghrib = { hour: maghribHour, minute: maghribMinute };
      prayerTimes.isha = { hour: ishaHour, minute: ishaMinute };

      updatePrayerTimes();
    }

    function init() {
      updateClock();
      updatePrayerTimes();
      requestNotificationPermission();

      var savePrayerTimesButton = document.getElementById('save-prayer-times');
      savePrayerTimesButton.addEventListener('click', savePrayerTimes);

      setInterval(function() {
        updateClock();
        updatePrayerTimes();
      }, 1000);
    }

    init();
  </script>
</body>
</html>
